
#!/bin/bash
# this command is used in order to unmute dac and set the volume to 100% during boot
#
/usr/bin/unmute


# this command sets deadline scheduler during boot
#
# note that mq-deadline is currently the default scheduler
#
#echo bfq > /sys/block/mmcblk0/queue/scheduler

# Tuning I/O scheduler
echo 1 > /sys/block/mmcblk0/queue/iosched/low_latency


# this command sets swappiness to 0
#
echo 0 > /proc/sys/vm/swappiness

# commands to change various kernel parameters
# please note that some of them might already have the mentioned value
# feel free to experiment if you know what you' re doing!
#
echo 1000000 > /proc/sys/kernel/sched_latency_ns
echo 100000 > /proc/sys/kernel/sched_min_granularity_ns
echo 25000 > /proc/sys/kernel/sched_wakeup_granularity_ns

# Disable HDMI for RPI
/opt/vc/bin/tvservice -off

#Reduce Audio thread latency
chrt -f -p 54 $(pgrep ksoftirqd/0)
chrt -f -p 54 $(pgrep ksoftirqd/1)
chrt -f -p 54 $(pgrep ksoftirqd/2)
chrt -f -p 54 $(pgrep ksoftirqd/3)

# set 100M full duplex with auto negotiation enabled
#/sbin/ethtool -s eth0 speed 100 duplex full autoneg on

# wireless connection tweaks
iw reg set US

#Restart Squeezelite in case Roon does not see Squeezelite on first boot
#sleep 15
#systemctl restart squeezelite

